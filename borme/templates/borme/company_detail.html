{% extends "borme/base.html" %}

{% load utils %}

{% block title %}{{ company.name }} | LibreBORME{% endblock %}

{% block content %}
    <h1>Sociedad «{{ company.name }}»</h1>

    <strong>NIF:</strong> {{ company.nif|default:"Desconocido" }}
    <br/>
    <strong>Fecha de constitución:</strong> {{ company.date_creation|date|default:"Desconocido" }}
    <br/>

    <h2>Cargos directivos (actuales):</h2>
    <table class="table table-condensed">
        <thead>
            <tr>
                <th>Cargo</th>
                <th>Persona física/jurídica</th>
                <th>Desde</th>
                <th>Hasta</th>
            </tr>
        </thead>
        <tbody>
        {% for cargo in company.cargos_actuales %}
            <tr>
                <td>{{ cargo.title }}</td>
                <td><a href="{{ cargo.name.get_absolute_url }}">{{ cargo.name }}</a></td>
                <td>{{ cargo.date_from|date:"SHORT_DATE_FORMAT"|default:"Desconocido" }}</td>
                <td>{{ cargo.date_to|date:"SHORT_DATE_FORMAT"|default:"Desconocido" }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h2>Cargos directivos (historial):</h2>
    <table class="table table-condensed">
        <thead>
            <tr>
                <th>Cargo</th>
                <th>Persona física/jurídica</th>
                <th>Desde</th>
                <th>Hasta</th>
            </tr>
        </thead>
        <tbody>
        {% for cargo in company.cargos_historial %}
            <tr>
                <td>{{ cargo.title }}</td>
                <td><a href="{{ cargo.name.get_absolute_url }}">{{ cargo.name }}</a></td>
                <td>{{ cargo.date_from|date:"SHORT_DATE_FORMAT"|default:"Desconocido" }}</td>
                <td>{{ cargo.date_to|date:"SHORT_DATE_FORMAT"|default:"Desconocido" }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h2>Anuncios en boletines oficiales</h2>
        {% for anuncio in anuncios %}
            <h3>{{ anuncio.borme.date|date }}</h3>
            <li>Anuncio <strong>{{ anuncio.id_anuncio }}</strong> con fecha <strong><i>{{ anuncio.borme.date|date }}</i></strong>.</li>
        <ul>
           {% for acto_name, value in anuncio.actos.items %}
              <li><strong>{{ acto_name }}</strong>:
             {% if value|is_string %}
               {{ value }}
             {% elif value|is_bool %}
               <i class="glyphicon glyphicon-ok"></i>
             {% else %}
             {% for cargo in value %}
               {{ cargo.title }}:
               <a href="{{ cargo.name.get_absolute_url }}">{{ cargo.name }}</a>{% if not forloop.last %}, {% endif %}
             {% endfor %}
             {% endif %}
              </li>
           {% endfor %}
        </ul>
        {% empty %}
            <i>No hay anuncios registrados.</i>
        {% endfor %}

    <h2>Personas relacionadas</h2>
    <ul>
        {% for person in persons %}
        <li><a href="{{ person.get_absolute_url }}">{{ person.name }}</a></li>
        {% endfor %}
    </ul>
    <h2>Sociedades relacionadas</h2>
        <i>No disponible</i>
    <h2>BORMEs relacionados</h2>
    <ul>
        {% for borme in bormes.values %}
        <li>{{ borme.cve }}
            <!--  <a href="#" alt="Ver" title="Ver"><i class="glyphicon glyphicon-share"></i></a> -->
            <a href="{{ borme.url }}" alt="Descargar PDF" title="Descargar PDF"><i class="glyphicon glyphicon-download-alt"></i></a>
        </li>
        {% empty %}
            <p><i>No hay actos registrados.</i></p>
        {% endfor %}
        También aparece referenciada en...
        {% for borme in company.in_bormes %}
        <li>{{ borme.cve }}
            <!--  <a href="#" alt="Ver" title="Ver"><i class="glyphicon glyphicon-share"></i></a> -->
            <a href="{{ borme.url }}" alt="Descargar PDF" title="Descargar PDF"><i class="glyphicon glyphicon-download-alt"></i></a>
        </li>
        {% endfor %}
    </ul>

{% endblock %}
