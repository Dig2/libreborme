{% extends "alertas/base_dashboard.html" %}
{% load staticfiles %}
{% load prettyjson %}

{% block extrastyles %}
    <link href="{% static "css/dashboard_form.css" %}" rel="stylesheet">
    {% prettyjson_setup %}
{% endblock %}

{% block content %}

        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h1 class="page-header">Listado de eventos</h1>
          <p>Ir a fecha:</p>
          <ul>
          {% for date in events_by_date.keys %}
          <li><a href="#{{ date.isoformat }}">{{ date }}</a></li>
          {% endfor %}
          </ul>

          {% for date, events in events_by_date.items %}
          <h2><a id="{{ date.isoformat }}"></a>{{ date }}</h2>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Created</th>
                  <th>Description</th>
                  <th>Type</th>
                  <th>Data</th>
                  <th>Metadata</th>
                </tr>
              </thead>
              <tbody>
                {% for event in events %}
                <tr>
                  <td>{{ event.stripe_id }}</td>
                  <td>{{ event.created|date:"H:m" }}</td>
                  <td>{{ event.description }}</td>
                  <td>{{ event.type }}</td>
                  <td>{% prettyjson event.data_json %}</td>
                  <td>{% prettyjson event.metadata_json %}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% endfor %}

        </div>
{% endblock %}
